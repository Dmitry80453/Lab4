<?php
// Назва файлу для збереження кількості відвідувань
$file = "counter.txt";

// Перевіряємо, чи існує файл
if (!file_exists($file)) {
    // Якщо файл не існує, створюємо його і записуємо значення 0
    $handle = fopen($file, "w");
    if ($handle) {
        fwrite($handle, "0");
        fclose($handle);
    } else {
        die("Не вдалося створити файл.");
    }
}

// Відкриваємо файл для читання та запису
$handle = fopen($file, "r+");
if ($handle) {
    // Читаємо поточне значення кількості відвідувань
    $count = (int)fread($handle, filesize($file));
    
    // Збільшуємо лічильник на 1
    $count++;
    
    // Переміщуємо вказівник файлу на початок і записуємо нове значення
    ftruncate($handle, 0); // Очищаємо файл
    rewind($handle);       // Переміщуємо вказівник на початок
    fwrite($handle, $count);
    
    // Закриваємо файл
    fclose($handle);
    
    echo "Ця сторінка була переглянута $count разів.";
} else {
    echo "Не вдалося відкрити файл.";
}
?>